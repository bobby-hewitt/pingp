{"ast":null,"code":"import _defineProperty from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Home/index.js\";\nimport React, { Component } from 'react';\nimport { push as _push } from 'connected-react-router';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport './style.scss';\nimport SocketListener from 'containers/SocketListener/PingP';\nimport Canvas from 'components/canvas';\nimport { gameOver as _gameOver, powerUpGained as _powerUpGained } from 'sockets/PingP/host';\nimport { setGameOver, powerUpUsedGameplay } from 'actions/PingP/gameplay';\nimport ReactGA from 'react-ga';\nimport localSetup from 'config/local';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    console.log('localSetup', localSetup);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n    _this.timeouts = [];\n    _this.powerUpDuration = 5000;\n    _this.player1PowerUpTimeout = null;\n    _this.player1PowerUpTimeout = null;\n    _this.speed = 1;\n    _this.state = {\n      height: window.innerHeight,\n      width: window.innerWidth,\n      yDir: 0,\n      yDir2: 0,\n      is2Player: false,\n      countdown: false,\n      isPlaying: false,\n      countdownNumber: '3',\n      gameOver: false\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.initialiseAnalytics();\n      window.addEventListener(\"resize\", function () {\n        _this2.setState({\n          height: window.innerHeight - 75,\n          width: window.innerWidth\n        });\n      });\n    } // initialiseAnalytics(){\n    // \t\tReactGA.initialize('UA-135889592-1');\n    // \tReactGA.pageview('/player');\n    // }\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.player1PowerUpTimeout);\n      clearTimeout(this.player2PowerUpTimeout);\n\n      for (var i = 0; i < this.timeouts.length; i++) {\n        clearTimeout(this.timeouts[i]);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(np) {\n      var _this3 = this;\n\n      //new player 1 data\n      if (this.state.yDir !== np.coords.y) {\n        this.setState({\n          yDir: np.coords.y\n        });\n      } //new player 2 data\n\n\n      if (this.state.yDir2 !== np.coords2.y) {\n        this.setState({\n          yDir2: np.coords2.y,\n          is2Player: true\n        });\n      } //start game\n\n\n      if (!this.props.gameIsStarted && np.gameIsStarted) {\n        this.startGame();\n      } //start a subsequent game\n\n\n      if (this.props.gameOver && !np.gameOver) {\n        this.setState({\n          countdownNumber: '3',\n          countdown: true,\n          isPlaying: false,\n          gameOver: false\n        }, function () {\n          _this3.startGame();\n        });\n      } //game over \n\n\n      if (!this.props.gameOver && np.gameOver) {\n        this.clearPowerUps();\n        this.setState({\n          gameOver: true\n        });\n      } //stop game\n      else if (this.props.gameIsStarted && !np.gameIsStarted) {\n          for (var i = 0; i < this.timeouts.length; i++) {\n            clearTimeout(this.timeouts[i]);\n          }\n\n          this.setState({\n            isPlaying: false,\n            countdown: false,\n            countdownNumber: '3'\n          });\n        }\n    }\n  }, {\n    key: \"startGame\",\n    value: function startGame() {\n      for (var i = 0; i < this.timeouts.length; i++) {\n        clearTimeout(this.timeouts[i]);\n      }\n\n      this.countdown('3', 0, true, 0);\n      this.countdown('2', 1000, true, 1);\n      this.countdown('1', 2000, true, 2);\n      this.countdown('3', 3000, false, 3);\n    }\n  }, {\n    key: \"countdown\",\n    value: function countdown(n, delay, show, timeoutIndex) {\n      var _this4 = this;\n\n      this.timeouts[timeoutIndex] = setTimeout(function () {\n        _this4.setState({\n          countdownNumber: n,\n          countdown: show,\n          isPlaying: !show\n        });\n      }, delay);\n    }\n  }, {\n    key: \"gameOver\",\n    value: function gameOver(winner) {\n      _gameOver(this, winner);\n    }\n  }, {\n    key: \"powerUpGained\",\n    value: function powerUpGained(player) {\n      var obj = {\n        playerData: this.props.players[player - 1],\n        playerNumber: player\n      };\n\n      if (this.props.players[player - 1]) {\n        _powerUpGained(obj);\n      }\n    }\n  }, {\n    key: \"clearPowerUps\",\n    value: function clearPowerUps() {\n      //reset power ups\n      var obj = {\n        playerNumber: 1,\n        powerUp: false\n      };\n      var obj2 = {\n        playerNumber: 2,\n        powerUp: false\n      };\n      this.props.powerUpUsedGameplay(obj);\n      this.props.powerUpUsedGameplay(obj2);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      return React.createElement(\"div\", {\n        className: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(SocketListener, {\n        isHost: true,\n        socket: this.props.socket,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(Canvas, (_React$createElement = {\n        player1PowerUp: this.props.player1PowerUp,\n        player2PowerUp: this.props.player2PowerUp,\n        scored: this.clearPowerUps.bind(this),\n        powerUpGained: this.powerUpGained.bind(this),\n        height: this.state.height,\n        width: this.state.width,\n        isGameOver: this.state.gameOver,\n        gameOver: this.gameOver.bind(this),\n        isPlaying: this.props.gameIsStarted\n      }, _defineProperty(_React$createElement, \"isPlaying\", this.state.isPlaying), _defineProperty(_React$createElement, \"yDir\", this.state.yDir), _defineProperty(_React$createElement, \"yDir2\", this.state.yDir2), _defineProperty(_React$createElement, \"is2Player\", this.props.players.length == 2), _defineProperty(_React$createElement, \"numOfPlayers\", this.props.players.length), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement)), React.createElement(\"div\", {\n        className: \"code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"headerContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, this.state.countdown && React.createElement(\"h1\", {\n        className: \"qr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.countdownNumber), this.props.gameOver && React.createElement(\"h1\", {\n        className: \"qr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Game over\"))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    player1PowerUp: state.gameplay.player1PowerUp,\n    player2PowerUp: state.gameplay.player2PowerUp,\n    gameIsStarted: state.gameplay.gameIsStarted,\n    roomCode: state.host.roomCode,\n    coords: state.host.coords,\n    coords2: state.host.coords2,\n    players: state.host.players,\n    gameOver: state.gameplay.gameOver\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    push: function push(path) {\n      return _push(path);\n    },\n    setGameOver: setGameOver,\n    powerUpUsedGameplay: powerUpUsedGameplay\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Home/index.js"],"names":["React","Component","push","bindActionCreators","connect","SocketListener","Canvas","gameOver","powerUpGained","setGameOver","powerUpUsedGameplay","ReactGA","localSetup","Home","props","console","log","timeouts","powerUpDuration","player1PowerUpTimeout","speed","state","height","window","innerHeight","width","innerWidth","yDir","yDir2","is2Player","countdown","isPlaying","countdownNumber","initialiseAnalytics","addEventListener","setState","clearTimeout","player2PowerUpTimeout","i","length","np","coords","y","coords2","gameIsStarted","startGame","clearPowerUps","n","delay","show","timeoutIndex","setTimeout","winner","player","obj","playerData","players","playerNumber","powerUp","obj2","socket","player1PowerUp","player2PowerUp","bind","mapStateToProps","gameplay","roomCode","host","mapDispatchToProps","dispatch","path"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { push } from 'connected-react-router'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport './style.scss'\nimport SocketListener from 'containers/SocketListener/PingP'\nimport Canvas from 'components/canvas'\nimport { gameOver, powerUpGained } from 'sockets/PingP/host'\nimport { setGameOver, powerUpUsedGameplay } from 'actions/PingP/gameplay'\nimport ReactGA from 'react-ga';\nimport localSetup from 'config/local'\n\nclass Home extends Component {\n\tconstructor(props){\n\t\tconsole.log('localSetup',localSetup)\n\t\tsuper(props)\n\t\tthis.timeouts = []\n\t\tthis.powerUpDuration = 5000\n\t\tthis.player1PowerUpTimeout = null\n\t\tthis.player1PowerUpTimeout = null\n\t\tthis.speed = 1\n\t\tthis.state = {\n\t\t\theight: window.innerHeight,\n\t\t\twidth:window.innerWidth,\n\t\t\tyDir: 0,\n\t\t\tyDir2: 0,\n\t\t\tis2Player: false,\n\t\t\tcountdown: false,\n\t\t\tisPlaying: false,\n\t\t\tcountdownNumber: '3',\n\t\t\tgameOver: false,\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.initialiseAnalytics()\n\t\twindow.addEventListener(\"resize\", () => {\n\t\t\tthis.setState({height:window.innerHeight - 75, width: window.innerWidth})\n\t\t});\n\t}\n\n\t// initialiseAnalytics(){\n // \t\tReactGA.initialize('UA-135889592-1');\n\t// \tReactGA.pageview('/player');\n\t// }\n\n\tcomponentWillUnmount(){\n\t\tclearTimeout(this.player1PowerUpTimeout)\n\t\tclearTimeout(this.player2PowerUpTimeout)\n\t\tfor (var i = 0; i < this.timeouts.length; i++){\n\t\t\tclearTimeout(this.timeouts[i])\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(np){\n\t\t//new player 1 data\n\t\tif (this.state.yDir !== np.coords.y){\n\t\t\tthis.setState({yDir:np.coords.y})\n\t\t}\n\t\t//new player 2 data\n\t\tif (this.state.yDir2 !== np.coords2.y){\n\t\t\tthis.setState({yDir2:np.coords2.y, is2Player:true})\n\t\t}\n\t\t//start game\n\t\tif (!this.props.gameIsStarted && np.gameIsStarted){\n\t\t\tthis.startGame()\n\t\t} \n\t\t//start a subsequent game\n\t\tif (this.props.gameOver && !np.gameOver){\n\t\t\tthis.setState({countdownNumber: '3', countdown: true, isPlaying: false, gameOver: false}, () => {\n\t\t\t\tthis.startGame()\n\t\t\t})\n\t\t}\n\t\t//game over \n\t\tif (!this.props.gameOver && np.gameOver){\n\t\t\tthis.clearPowerUps()\n\t\t\tthis.setState({gameOver: true})\n\t\t}\n\t\t//stop game\n\t\telse if (this.props.gameIsStarted && !np.gameIsStarted){\n\t\t\tfor (var i = 0; i < this.timeouts.length; i++){\n\t\t\t\tclearTimeout(this.timeouts[i])\n\t\t\t}\n\t\t\tthis.setState({isPlaying: false, countdown: false, countdownNumber: '3'})\n\t\t} \n\t}\n\n\n\tstartGame(){\n\t\tfor (var i = 0; i < this.timeouts.length; i++){\n\t\t\tclearTimeout(this.timeouts[i])\n\t\t}\n\t\tthis.countdown('3', 0, true, 0)\n\t\tthis.countdown('2', 1000, true, 1)\n\t\tthis.countdown('1', 2000, true, 2)\n\t\tthis.countdown('3', 3000, false, 3)\n\t}\n\n\tcountdown(n, delay, show, timeoutIndex){\n\t\tthis.timeouts[timeoutIndex] = setTimeout(() => {\n\t\t\tthis.setState({countdownNumber: n, countdown: show, isPlaying: !show})\n\t\t},delay)\n\t}\n\n\tgameOver(winner){\n\t\tgameOver(this, winner)\n\t}\n\n\tpowerUpGained(player){\n\t\tlet obj = {\n\t\t\tplayerData: this.props.players[player-1],\n\t\t\tplayerNumber: player\n\t\t}\n\t\tif(this.props.players[player-1]){\n\t\t\tpowerUpGained(obj)\n\t\t}\n\t}\n\n\tclearPowerUps(){\n\t\t//reset power ups\n\t\tconst obj = {\n\t\t\tplayerNumber: 1,\n\t\t\tpowerUp: false\n\t\t}\n\t\t\n\t\tconst obj2 = {\n\t\t\tplayerNumber: 2,\n\t\t\tpowerUp: false\n\t\t}\n\t\tthis.props.powerUpUsedGameplay(obj)\n\t\tthis.props.powerUpUsedGameplay(obj2)\t\n\t}\n\n\trender(){\n\t\t\n\t\t\n\t\t\t\n\t\treturn(\n\t\t\t<div className=\"home\">\n\t\t\t\t<SocketListener isHost socket={this.props.socket}/>\n\t\t\t\t<Canvas\n\t\t\t\t\tplayer1PowerUp={this.props.player1PowerUp}\n\t\t\t\t\tplayer2PowerUp={this.props.player2PowerUp}\n\t\t\t\t\tscored={this.clearPowerUps.bind(this)}\n\t\t\t\t\tpowerUpGained={this.powerUpGained.bind(this)}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\tisGameOver={this.state.gameOver}\n\t\t\t\t\tgameOver={this.gameOver.bind(this)}\n\t\t\t\t\tisPlaying={this.props.gameIsStarted}\n\t\t\t\t\tisPlaying={this.state.isPlaying}\n\t\t\t\t\tyDir={this.state.yDir}\n\t\t\t\t\tyDir2={this.state.yDir2}\n\t\t\t\t\tis2Player={this.props.players.length == 2}\n\t\t\t\t\tnumOfPlayers={this.props.players.length}/>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"code\">\n\t\t\t\t\t\t<div className=\"headerContainer\">\n\t\t\t\t\t\t\t{/*!this.props.gameIsStarted &&\n\t\t\t\t\t\t\t\t<div className=\"socials\">\n\t\t\t\t\t\t\t\t\t<a href=\"https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.pingp.co&t=Online%202%20Plsayer%20Pong\" target=\"blank\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"social\" style={{backgroundImage: 'url(' + require('assets/images/facebook.png')+ ')'}} />\n\t\t\t \t\t\t\t\t\t</a>\n\t\t\t \t\t\t\t\t\t<a href=\"http://twitter.com/share?text=You%20have%20got%20to%20play%20this&url=http%3A%2F%2Fwww.pingp.co&hashtags=funAndGames\" target=\"blank\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"social\" style={{backgroundImage: 'url(' + require('assets/images/twitter.png')+ ')'}} />\n\t\t\t \t\t\t\t\t\t</a>\n\t\t \t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t*/}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{this.state.countdown &&\n\t\t\t\t\t\t\t\t<h1 className=\"qr\">{this.state.countdownNumber}</h1>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t\t<h1 className=\"qr\">Game over</h1>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tplayer1PowerUp: state.gameplay.player1PowerUp,\n\tplayer2PowerUp: state.gameplay.player2PowerUp,\n\tgameIsStarted: state.gameplay.gameIsStarted,\n\troomCode: state.host.roomCode,\n\tcoords: state.host.coords,\n\tcoords2: state.host.coords2,\n\tplayers: state.host.players,\n\tgameOver: state.gameplay.gameOver,\n})\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  push: (path) => push(path),\n  setGameOver,\n  powerUpUsedGameplay,\n}, dispatch)\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Home)"]},"metadata":{},"sourceType":"module"}