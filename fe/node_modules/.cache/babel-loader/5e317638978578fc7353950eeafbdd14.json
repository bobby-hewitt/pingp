{"ast":null,"code":"import _classCallCheck from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Mobile/index.js\";\nimport React, { Component } from 'react';\nimport { push as _push } from 'connected-react-router';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport './style.scss';\nimport SocketListener from 'containers/SocketListener/PingP';\nimport { sendOrientation, startGameSocket, quitGameSocket, restartGameSocket } from 'sockets/PingP/player';\nimport { setSelf } from 'actions/PingP/player';\nimport { startGame, setGameOver } from 'actions/PingP/gameplay';\nimport ReactGA from 'react-ga';\n\nvar Mobile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Mobile, _Component);\n\n  function Mobile(props) {\n    var _this;\n\n    _classCallCheck(this, Mobile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Mobile).call(this, props));\n    _this.onTilt = _this.onTilt.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      xDir: 0,\n      yDir: 0,\n      dir: 'equal',\n      visualSpeed: 0\n    };\n    _this.speeds = ['-6', '-5', '-4', '-3', '-2', '-1', '0', '1', '2', '3', '4', '5', '6'];\n    return _this;\n  }\n\n  _createClass(Mobile, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (!this.props.room) {\n        this.props.push('/m/join');\n      }\n\n      this.initialiseAnalytics();\n    }\n  }, {\n    key: \"initialiseAnalytics\",\n    value: function initialiseAnalytics() {\n      ReactGA.initialize('UA-135889592-1');\n      ReactGA.pageview('/player');\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(np) {\n      if (!np.playerNumber && this.props.playerNumber) {\n        this.props.push('not-found');\n      }\n    }\n  }, {\n    key: \"onTilt\",\n    value: function onTilt(orientation) {\n      var _this$findLimit = this.findLimit(orientation.beta),\n          y = _this$findLimit.y,\n          dir = _this$findLimit.dir,\n          visualSpeed = _this$findLimit.visualSpeed;\n\n      if (y !== this.state.yDir) {\n        var dirs = {\n          y: y,\n          playerNumber: this.props.playerNumber,\n          room: this.props.room\n        };\n        sendOrientation(dirs, this, this.props.socket);\n        this.setState({\n          yDir: y,\n          visualSpeed: visualSpeed,\n          dir: dir\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('deviceorientation', this.onTilt);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('deviceorientation', this.onTilt, false);\n    }\n  }, {\n    key: \"findLimit\",\n    value: function findLimit(coord) {\n      // if (coord < -27.5 + 45) return {y: -20, dir: 'down', visualSpeed: 5}\n      if (coord < -35 + 45) return {\n        y: -12,\n        dir: 'down',\n        visualSpeed: 4\n      };else if (coord < -25 + 45) return {\n        y: -9,\n        dir: 'down',\n        visualSpeed: 3\n      };else if (coord < -15 + 45) return {\n        y: -6,\n        dir: 'down',\n        visualSpeed: 2\n      };else if (coord < -5 + 45) return {\n        y: -3,\n        dir: 'down',\n        visualSpeed: 1\n      };else if (coord < 5 + 45) return {\n        y: 0,\n        dir: 'equal',\n        visualSpeed: 0\n      };else if (coord < 15 + 45) return {\n        y: 3,\n        dir: 'up',\n        visualSpeed: 1\n      };else if (coord < 25 + 45) return {\n        y: 6,\n        dir: 'up',\n        visualSpeed: 2\n      };else if (coord < 35 + 45) return {\n        y: 9,\n        dir: 'up',\n        visualSpeed: 3 // else if (coord < 45 + 45) return {y: 16, dir: 'up', visualSpeed: 4}\n\n      };else return {\n        y: 12,\n        dir: 'up',\n        visualSpeed: 4\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"mobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(SocketListener, {\n        socket: this.props.socket,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"buttonSetMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pausePlay buttonMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, !this.props.gameIsStarted && !this.props.gameOver && React.createElement(\"img\", {\n        src: require('assets/images/playBlack.png'),\n        className: \"play\",\n        onClick: startGameSocket.bind(this, this, this.props.socket),\n        alt: \"Play\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), this.props.gameIsStarted && !this.props.gameOver && React.createElement(\"img\", {\n        src: require('assets/images/pauseBlack.png'),\n        onClick: startGameSocket.bind(this, this, this.props.socket),\n        alt: \"Pause\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), this.props.gameOver && React.createElement(\"img\", {\n        src: require('assets/images/playBlack.png'),\n        className: \"play\",\n        onClick: restartGameSocket.bind(this, this, this.props.socket),\n        alt: \"Play\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), !this.props.gameOver && React.createElement(\"p\", {\n        className: \"headerMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Player\", JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber), \" \"), this.props.gameOver && React.createElement(\"p\", {\n        className: \"headerMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Player\", JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber), \" \"), React.createElement(\"div\", {\n        className: \"buttonMobile warning quit\",\n        onClick: quitGameSocket.bind(this, this, this.props.socket),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Quit\")))), React.createElement(\"div\", {\n        className: \"gamePadContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"gamePad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"instructionsMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Tilt phone to control paddle\"), this.props.gameOver && React.createElement(\"p\", {\n        className: \"playerResult\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, this.props.winner.indexOf(this.props.playerNumber) > -1 ? 'You win' : 'You lose'), React.createElement(\"div\", {\n        className: \"speedContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, this.state.dir === 'up' && Array.apply(null, {\n        length: this.state.visualSpeed\n      }).map(function (e, i) {\n        return React.createElement(\"div\", {\n          key: i,\n          className: \" fontawesome chevronUp\",\n          style: {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        });\n      }), this.state.dir === 'down' && Array.apply(null, {\n        length: this.state.visualSpeed\n      }).map(function (e, i) {\n        return React.createElement(\"div\", {\n          key: i,\n          className: \" fontawesome chevronDown\",\n          style: {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        });\n      }), this.state.dir === 'equal' && React.createElement(\"div\", {\n        className: \"equal fontawesome \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Mobile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    gameIsStarted: state.gameplay.gameIsStarted,\n    router: state.router,\n    room: state.generalPlayer.room,\n    playerNumber: state.generalPlayer.playerNumber,\n    gameOver: state.gameplay.gameOver,\n    winner: state.gameplay.winner\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    push: function push(path) {\n      return _push(path);\n    },\n    setSelf: setSelf,\n    setGameOver: setGameOver,\n    startGame: startGame\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Mobile);","map":{"version":3,"sources":["/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Mobile/index.js"],"names":["React","Component","push","bindActionCreators","connect","SocketListener","sendOrientation","startGameSocket","quitGameSocket","restartGameSocket","setSelf","startGame","setGameOver","ReactGA","Mobile","props","onTilt","bind","state","xDir","yDir","dir","visualSpeed","speeds","room","initialiseAnalytics","initialize","pageview","np","playerNumber","orientation","findLimit","beta","y","dirs","socket","setState","window","addEventListener","removeEventListener","coord","gameIsStarted","gameOver","require","JSON","stringify","winner","indexOf","Array","apply","length","map","e","i","mapStateToProps","gameplay","router","generalPlayer","mapDispatchToProps","dispatch","path"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { push } from 'connected-react-router'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport './style.scss'\nimport SocketListener from 'containers/SocketListener/PingP'\nimport { sendOrientation, startGameSocket, quitGameSocket, restartGameSocket } from 'sockets/PingP/player'\nimport { setSelf  } from 'actions/PingP/player'\nimport { startGame, setGameOver } from 'actions/PingP/gameplay'\nimport ReactGA from 'react-ga';\n\nclass Mobile extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.onTilt = this.onTilt.bind(this)\n\t\tthis.state = {\n\t\t\txDir: 0,\n\t\t\tyDir: 0,\n\t\t\tdir: 'equal',\n\t\t\tvisualSpeed: 0,\n\t\t}\n\t\tthis.speeds = ['-6','-5','-4','-3','-2','-1','0','1','2','3','4','5','6']\n\t}\n\n\tcomponentWillMount(){ \n\n\t\tif (!this.props.room){\n\t\t\tthis.props.push('/m/join')\n\t\t}\n\t\n\t\tthis.initialiseAnalytics()\n\t}\n\n\tinitialiseAnalytics(){\n \t\tReactGA.initialize('UA-135889592-1');\n\t\tReactGA.pageview('/player');\n\t}\n\n\tcomponentWillReceiveProps(np){\n\t\tif (!np.playerNumber && this.props.playerNumber){\n\t\t\tthis.props.push('not-found')\n\t\t}\n\t}\n\n\tonTilt(orientation){\n\t\t\n\t\t\tlet {y, dir, visualSpeed } = this.findLimit(orientation.beta)\n\t\t\tif (y !== this.state.yDir){\t\t\t\t\n\t\t\t\tlet dirs = {\n\t\t\t\t\ty: y,\n\t\t\t\t\tplayerNumber: this.props.playerNumber,\n\t\t\t\t\troom: this.props.room\n\t\t\t\t}\n\t\t\t\tsendOrientation(dirs, this, this.props.socket)\n\t\t\t\tthis.setState({yDir: y, visualSpeed, dir})\n\t\t\t}\n\t\t\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener('deviceorientation', this.onTilt)\n\t}\n   \tcomponentWillUnmount() {\n        window.removeEventListener('deviceorientation', this.onTilt, false);\n    }\n\n\tfindLimit(coord){\n\t\t// if (coord < -27.5 + 45) return {y: -20, dir: 'down', visualSpeed: 5}\n\t\tif (coord < -35 + 45) return {y: -12, dir: 'down', visualSpeed: 4}\n\t\telse if (coord < -25 + 45) return {y: -9, dir: 'down', visualSpeed: 3}\n\t\telse if (coord < -15 + 45) return {y: -6, dir: 'down', visualSpeed: 2}\n\t\telse if (coord < -5 + 45) return {y: -3, dir: 'down', visualSpeed: 1}\n\t\telse if (coord < 5 + 45) return {y: 0, dir: 'equal', visualSpeed: 0}\n\t\telse if (coord < 15 + 45) return {y: 3, dir: 'up', visualSpeed: 1}\n\t\telse if (coord < 25 + 45) return {y: 6, dir: 'up', visualSpeed: 2}\n\t\telse if (coord < 35 + 45) return {y: 9, dir: 'up', visualSpeed: 3}\n\t\t// else if (coord < 45 + 45) return {y: 16, dir: 'up', visualSpeed: 4}\n\t\telse return {y: 12, dir: 'up', visualSpeed: 4}\n\t}\n\n\n\n\trender(){\n\t\treturn(\n\t\t\t<div className=\"mobile\">\n\t\t\t\t<SocketListener socket={this.props.socket}/>\n\t\t\t\t<div className=\"info\">\t\n\t\t\t\t\t<div className=\"buttonSetMobile\">\n\t\t\t\t\t\t<div className=\"pausePlay buttonMobile\">\n\t\t\t\t\t\t\t{!this.props.gameIsStarted && !this.props.gameOver &&\n\t\t\t\t\t\t\t\t<img src={require('assets/images/playBlack.png')} className=\"play\" onClick={startGameSocket.bind(this, this, this.props.socket)} alt=\"Play\"/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.props.gameIsStarted && !this.props.gameOver &&\n\t\t\t\t\t\t\t\t<img src={require('assets/images/pauseBlack.png')} onClick={startGameSocket.bind(this, this, this.props.socket)} alt=\"Pause\"/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t\t<img src={require('assets/images/playBlack.png')} className=\"play\" onClick={restartGameSocket.bind(this, this, this.props.socket)}alt=\"Play\"/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!this.props.gameOver &&\n\t\t\t\t\t\t\t<p className=\"headerMobile\">Player{JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber)} </p>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t<p className=\"headerMobile\">Player{JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber)} </p>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div className=\"buttonMobile warning quit\" onClick={quitGameSocket.bind(this, this, this.props.socket)} >\n\t\t\t\t\t\t\t<p>Quit</p>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t</div>\t\n\t\t\t\t</div>\n\t\t\t\t<div className=\"gamePadContainer\">\n\t\t\t\t\t\t<div className=\"gamePad\">\n\t\t\t\t\t\t\t<p className=\"instructionsMobile\">Tilt phone to control paddle</p>\n\t\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t\t<p className=\"playerResult\">{this.props.winner.indexOf(this.props.playerNumber) > -1 ? 'You win' : 'You lose'}</p>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className=\"speedContainer\">\n\t\t\t\t\t\t\t\t{this.state.dir === 'up' && Array.apply(null, { length: this.state.visualSpeed }).map((e, i) => {\n\t\t\t\t\t\t\t\t\treturn(\t\n\t\t\t\t\t\t\t\t\t\t<div key={i} className=\" fontawesome chevronUp\" style={{}}/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{this.state.dir === 'down' && Array.apply(null, { length: this.state.visualSpeed }).map((e, i) => {\n\t\t\t\t\t\t\t\t\treturn(\t\n\t\t\t\t\t\t\t\t\t\t<div key={i} className=\" fontawesome chevronDown\" style={{}}/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{this.state.dir === 'equal' && <div className=\"equal fontawesome \" />}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tgameIsStarted: state.gameplay.gameIsStarted,\n\trouter: state.router,\n\troom: state.generalPlayer.room,\n\tplayerNumber: state.generalPlayer.playerNumber,\n\tgameOver: state.gameplay.gameOver,\n\twinner: state.gameplay.winner,\n})\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  push: (path) => push(path),\n  setSelf,\n  setGameOver,\n  startGame,\n}, dispatch)\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Mobile)"]},"metadata":{},"sourceType":"module"}