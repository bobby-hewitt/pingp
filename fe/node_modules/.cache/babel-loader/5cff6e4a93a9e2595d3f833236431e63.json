{"ast":null,"code":"import _defineProperty from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Home/index.js\";\nimport React, { Component } from 'react';\nimport { push as _push } from 'connected-react-router';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport './style.scss';\nimport SocketListener from 'containers/SocketListener/PingP';\nimport Canvas from 'components/canvas';\nimport { gameOver as _gameOver } from 'sockets/PingP/host';\nimport { setGameOver, powerUpUsedGameplay } from 'actions/PingP/gameplay';\nimport ReactGA from 'react-ga';\nimport localSetup from 'config/local';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    console.log('localSetup', localSetup);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n    _this.timeouts = [];\n    _this.powerUpDuration = 5000;\n    _this.player1PowerUpTimeout = null;\n    _this.player1PowerUpTimeout = null;\n    _this.speed = 1;\n    _this.state = {\n      height: window.innerHeight,\n      width: window.innerWidth,\n      yDir: 0,\n      yDir2: 0,\n      is2Player: false,\n      countdown: false,\n      isPlaying: false,\n      countdownNumber: '3',\n      gameOver: false\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.initialiseAnalytics();\n      window.addEventListener(\"resize\", function () {\n        _this2.setState({\n          height: window.innerHeight - 75,\n          width: window.innerWidth\n        });\n      });\n    }\n  }, {\n    key: \"initialiseAnalytics\",\n    value: function initialiseAnalytics() {\n      ReactGA.initialize('UA-135889592-1');\n      ReactGA.pageview('/player');\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearTimeout(this.player1PowerUpTimeout);\n      clearTimeout(this.player2PowerUpTimeout);\n\n      for (var i = 0; i < this.timeouts.length; i++) {\n        clearTimeout(this.timeouts[i]);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(np) {\n      var _this3 = this;\n\n      //new player 1 data\n      if (this.state.yDir !== np.coords.y) {\n        this.setState({\n          yDir: np.coords.y\n        });\n      } //new player 2 data\n\n\n      if (this.state.yDir2 !== np.coords2.y) {\n        this.setState({\n          yDir2: np.coords2.y,\n          is2Player: true\n        });\n      } //start game\n\n\n      if (!this.props.gameIsStarted && np.gameIsStarted) {\n        this.startGame();\n      } //start a subsequent game\n\n\n      if (this.props.gameOver && !np.gameOver) {\n        this.setState({\n          countdownNumber: '3',\n          countdown: true,\n          isPlaying: false,\n          gameOver: false\n        }, function () {\n          _this3.startGame();\n        });\n      } //game over \n\n\n      if (!this.props.gameOver && np.gameOver) {\n        this.clearPowerUps();\n        this.setState({\n          gameOver: true\n        });\n      } //stop game\n      else if (this.props.gameIsStarted && !np.gameIsStarted) {\n          for (var i = 0; i < this.timeouts.length; i++) {\n            clearTimeout(this.timeouts[i]);\n          }\n\n          this.setState({\n            isPlaying: false,\n            countdown: false,\n            countdownNumber: '3'\n          });\n        }\n    }\n  }, {\n    key: \"startGame\",\n    value: function startGame() {\n      for (var i = 0; i < this.timeouts.length; i++) {\n        clearTimeout(this.timeouts[i]);\n      }\n\n      this.countdown('3', 0, true, 0);\n      this.countdown('2', 1000, true, 1);\n      this.countdown('1', 2000, true, 2);\n      this.countdown('3', 3000, false, 3);\n    }\n  }, {\n    key: \"countdown\",\n    value: function countdown(n, delay, show, timeoutIndex) {\n      var _this4 = this;\n\n      this.timeouts[timeoutIndex] = setTimeout(function () {\n        _this4.setState({\n          countdownNumber: n,\n          countdown: show,\n          isPlaying: !show\n        });\n      }, delay);\n    }\n  }, {\n    key: \"gameOver\",\n    value: function gameOver(winner) {\n      _gameOver(this, winner);\n    } // powerUpGained(player){\n    // \tlet obj = {\n    // \t\tplayerData: this.props.players[player-1],\n    // \t\tplayerNumber: player\n    // \t}\n    // \tif(this.props.players[player-1]){\n    // \t\tpowerUpGained(obj)\n    // \t}\n    // }\n    // clearPowerUps(){\n    // \t//reset power ups\n    // \tconst obj = {\n    // \t\tplayerNumber: 1,\n    // \t\tpowerUp: false\n    // \t}\n    // \tconst obj2 = {\n    // \t\tplayerNumber: 2,\n    // \t\tpowerUp: false\n    // \t}\n    // \tthis.props.powerUpUsedGameplay(obj)\n    // \tthis.props.powerUpUsedGameplay(obj2)\t\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      return React.createElement(\"div\", {\n        className: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(SocketListener, {\n        isHost: true,\n        socket: this.props.socket,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(Canvas, (_React$createElement = {\n        player1PowerUp: this.props.player1PowerUp,\n        player2PowerUp: this.props.player2PowerUp,\n        scored: this.clearPowerUps.bind(this),\n        height: this.state.height,\n        width: this.state.width,\n        isGameOver: this.state.gameOver,\n        gameOver: this.gameOver.bind(this),\n        isPlaying: this.props.gameIsStarted\n      }, _defineProperty(_React$createElement, \"isPlaying\", this.state.isPlaying), _defineProperty(_React$createElement, \"yDir\", this.state.yDir), _defineProperty(_React$createElement, \"yDir2\", this.state.yDir2), _defineProperty(_React$createElement, \"is2Player\", this.props.players.length == 2), _defineProperty(_React$createElement, \"numOfPlayers\", this.props.players.length), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement)), React.createElement(\"div\", {\n        className: \"code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"headerContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, this.state.countdown && React.createElement(\"h1\", {\n        className: \"qr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.countdownNumber), this.props.gameOver && React.createElement(\"h1\", {\n        className: \"qr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Game over\"))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    // player1PowerUp: state.gameplay.player1PowerUp,\n    // player2PowerUp: state.gameplay.player2PowerUp,\n    gameIsStarted: state.gameplay.gameIsStarted,\n    roomCode: state.host.roomCode,\n    coords: state.host.coords,\n    coords2: state.host.coords2,\n    players: state.host.players,\n    gameOver: state.gameplay.gameOver\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    push: function push(path) {\n      return _push(path);\n    },\n    setGameOver: setGameOver\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Home/index.js"],"names":["React","Component","push","bindActionCreators","connect","SocketListener","Canvas","gameOver","setGameOver","powerUpUsedGameplay","ReactGA","localSetup","Home","props","console","log","timeouts","powerUpDuration","player1PowerUpTimeout","speed","state","height","window","innerHeight","width","innerWidth","yDir","yDir2","is2Player","countdown","isPlaying","countdownNumber","initialiseAnalytics","addEventListener","setState","initialize","pageview","clearTimeout","player2PowerUpTimeout","i","length","np","coords","y","coords2","gameIsStarted","startGame","clearPowerUps","n","delay","show","timeoutIndex","setTimeout","winner","socket","player1PowerUp","player2PowerUp","bind","players","mapStateToProps","gameplay","roomCode","host","mapDispatchToProps","dispatch","path"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAI,IAAJA,KAAT,QAAqB,wBAArB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,cAAP;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,QAAQ,IAARA,SAAT,QAAyB,oBAAzB;AACA,SAASC,WAAT,EAAsBC,mBAAtB,QAAiD,wBAAjD;AACA,OAAOC,OAAP,MAAoB,UAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;;IAEMC,I;;;;;AACL,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACjBC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBJ,UAAzB;AACA,8EAAME,KAAN;AACA,UAAKG,QAAL,GAAgB,EAAhB;AACA,UAAKC,eAAL,GAAuB,IAAvB;AACA,UAAKC,qBAAL,GAA6B,IAA7B;AACA,UAAKA,qBAAL,GAA6B,IAA7B;AACA,UAAKC,KAAL,GAAa,CAAb;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAEC,MAAM,CAACC,WADH;AAEZC,MAAAA,KAAK,EAACF,MAAM,CAACG,UAFD;AAGZC,MAAAA,IAAI,EAAE,CAHM;AAIZC,MAAAA,KAAK,EAAE,CAJK;AAKZC,MAAAA,SAAS,EAAE,KALC;AAMZC,MAAAA,SAAS,EAAE,KANC;AAOZC,MAAAA,SAAS,EAAE,KAPC;AAQZC,MAAAA,eAAe,EAAE,GARL;AASZxB,MAAAA,QAAQ,EAAE;AATE,KAAb;AARiB;AAmBjB;;;;wCAEkB;AAAA;;AAClB,WAAKyB,mBAAL;AACAV,MAAAA,MAAM,CAACW,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;AACvC,QAAA,MAAI,CAACC,QAAL,CAAc;AAACb,UAAAA,MAAM,EAACC,MAAM,CAACC,WAAP,GAAqB,EAA7B;AAAiCC,UAAAA,KAAK,EAAEF,MAAM,CAACG;AAA/C,SAAd;AACA,OAFD;AAGA;;;0CAEoB;AACnBf,MAAAA,OAAO,CAACyB,UAAR,CAAmB,gBAAnB;AACDzB,MAAAA,OAAO,CAAC0B,QAAR,CAAiB,SAAjB;AACA;;;2CAEqB;AACrBC,MAAAA,YAAY,CAAC,KAAKnB,qBAAN,CAAZ;AACAmB,MAAAA,YAAY,CAAC,KAAKC,qBAAN,CAAZ;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,QAAL,CAAcwB,MAAlC,EAA0CD,CAAC,EAA3C,EAA8C;AAC7CF,QAAAA,YAAY,CAAC,KAAKrB,QAAL,CAAcuB,CAAd,CAAD,CAAZ;AACA;AACD;;;8CAEyBE,E,EAAG;AAAA;;AAC5B;AACA,UAAI,KAAKrB,KAAL,CAAWM,IAAX,KAAoBe,EAAE,CAACC,MAAH,CAAUC,CAAlC,EAAoC;AACnC,aAAKT,QAAL,CAAc;AAACR,UAAAA,IAAI,EAACe,EAAE,CAACC,MAAH,CAAUC;AAAhB,SAAd;AACA,OAJ2B,CAK5B;;;AACA,UAAI,KAAKvB,KAAL,CAAWO,KAAX,KAAqBc,EAAE,CAACG,OAAH,CAAWD,CAApC,EAAsC;AACrC,aAAKT,QAAL,CAAc;AAACP,UAAAA,KAAK,EAACc,EAAE,CAACG,OAAH,CAAWD,CAAlB;AAAqBf,UAAAA,SAAS,EAAC;AAA/B,SAAd;AACA,OAR2B,CAS5B;;;AACA,UAAI,CAAC,KAAKf,KAAL,CAAWgC,aAAZ,IAA6BJ,EAAE,CAACI,aAApC,EAAkD;AACjD,aAAKC,SAAL;AACA,OAZ2B,CAa5B;;;AACA,UAAI,KAAKjC,KAAL,CAAWN,QAAX,IAAuB,CAACkC,EAAE,CAAClC,QAA/B,EAAwC;AACvC,aAAK2B,QAAL,CAAc;AAACH,UAAAA,eAAe,EAAE,GAAlB;AAAuBF,UAAAA,SAAS,EAAE,IAAlC;AAAwCC,UAAAA,SAAS,EAAE,KAAnD;AAA0DvB,UAAAA,QAAQ,EAAE;AAApE,SAAd,EAA0F,YAAM;AAC/F,UAAA,MAAI,CAACuC,SAAL;AACA,SAFD;AAGA,OAlB2B,CAmB5B;;;AACA,UAAI,CAAC,KAAKjC,KAAL,CAAWN,QAAZ,IAAwBkC,EAAE,CAAClC,QAA/B,EAAwC;AACvC,aAAKwC,aAAL;AACA,aAAKb,QAAL,CAAc;AAAC3B,UAAAA,QAAQ,EAAE;AAAX,SAAd;AACA,OAHD,CAIA;AAJA,WAKK,IAAI,KAAKM,KAAL,CAAWgC,aAAX,IAA4B,CAACJ,EAAE,CAACI,aAApC,EAAkD;AACtD,eAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,QAAL,CAAcwB,MAAlC,EAA0CD,CAAC,EAA3C,EAA8C;AAC7CF,YAAAA,YAAY,CAAC,KAAKrB,QAAL,CAAcuB,CAAd,CAAD,CAAZ;AACA;;AACD,eAAKL,QAAL,CAAc;AAACJ,YAAAA,SAAS,EAAE,KAAZ;AAAmBD,YAAAA,SAAS,EAAE,KAA9B;AAAqCE,YAAAA,eAAe,EAAE;AAAtD,WAAd;AACA;AACD;;;gCAGU;AACV,WAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,QAAL,CAAcwB,MAAlC,EAA0CD,CAAC,EAA3C,EAA8C;AAC7CF,QAAAA,YAAY,CAAC,KAAKrB,QAAL,CAAcuB,CAAd,CAAD,CAAZ;AACA;;AACD,WAAKV,SAAL,CAAe,GAAf,EAAoB,CAApB,EAAuB,IAAvB,EAA6B,CAA7B;AACA,WAAKA,SAAL,CAAe,GAAf,EAAoB,IAApB,EAA0B,IAA1B,EAAgC,CAAhC;AACA,WAAKA,SAAL,CAAe,GAAf,EAAoB,IAApB,EAA0B,IAA1B,EAAgC,CAAhC;AACA,WAAKA,SAAL,CAAe,GAAf,EAAoB,IAApB,EAA0B,KAA1B,EAAiC,CAAjC;AACA;;;8BAESmB,C,EAAGC,K,EAAOC,I,EAAMC,Y,EAAa;AAAA;;AACtC,WAAKnC,QAAL,CAAcmC,YAAd,IAA8BC,UAAU,CAAC,YAAM;AAC9C,QAAA,MAAI,CAAClB,QAAL,CAAc;AAACH,UAAAA,eAAe,EAAEiB,CAAlB;AAAqBnB,UAAAA,SAAS,EAAEqB,IAAhC;AAAsCpB,UAAAA,SAAS,EAAE,CAACoB;AAAlD,SAAd;AACA,OAFuC,EAEtCD,KAFsC,CAAxC;AAGA;;;6BAEQI,M,EAAO;AACf9C,MAAAA,SAAQ,CAAC,IAAD,EAAO8C,MAAP,CAAR;AACA,K,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;6BAEQ;AAAA;;AAIP,aACC;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,cAAD;AAAgB,QAAA,MAAM,MAAtB;AAAuB,QAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWyC,MAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,EAEC,oBAAC,MAAD;AACC,QAAA,cAAc,EAAE,KAAKzC,KAAL,CAAW0C,cAD5B;AAEC,QAAA,cAAc,EAAE,KAAK1C,KAAL,CAAW2C,cAF5B;AAGC,QAAA,MAAM,EAAE,KAAKT,aAAL,CAAmBU,IAAnB,CAAwB,IAAxB,CAHT;AAKC,QAAA,MAAM,EAAE,KAAKrC,KAAL,CAAWC,MALpB;AAMC,QAAA,KAAK,EAAE,KAAKD,KAAL,CAAWI,KANnB;AAOC,QAAA,UAAU,EAAE,KAAKJ,KAAL,CAAWb,QAPxB;AAQC,QAAA,QAAQ,EAAE,KAAKA,QAAL,CAAckD,IAAd,CAAmB,IAAnB,CARX;AASC,QAAA,SAAS,EAAE,KAAK5C,KAAL,CAAWgC;AATvB,4DAUY,KAAKzB,KAAL,CAAWU,SAVvB,iDAWO,KAAKV,KAAL,CAAWM,IAXlB,kDAYQ,KAAKN,KAAL,CAAWO,KAZnB,sDAaY,KAAKd,KAAL,CAAW6C,OAAX,CAAmBlB,MAAnB,IAA6B,CAbzC,yDAce,KAAK3B,KAAL,CAAW6C,OAAX,CAAmBlB,MAdlC;AAAA;AAAA;AAAA,uFAFD,EAkBE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAYE,KAAKpB,KAAL,CAAWS,SAAX,IACA;AAAI,QAAA,SAAS,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAoB,KAAKT,KAAL,CAAWW,eAA/B,CAbF,EAeE,KAAKlB,KAAL,CAAWN,QAAX,IACA;AAAI,QAAA,SAAS,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAhBF,CADD,CAlBF,CADD;AA0CA;;;;EAvKiBN,S;;AA0KnB,IAAM0D,eAAe,GAAG,SAAlBA,eAAkB,CAAAvC,KAAK;AAAA,SAAK;AACjC;AACA;AACAyB,IAAAA,aAAa,EAAEzB,KAAK,CAACwC,QAAN,CAAef,aAHG;AAIjCgB,IAAAA,QAAQ,EAAEzC,KAAK,CAAC0C,IAAN,CAAWD,QAJY;AAKjCnB,IAAAA,MAAM,EAAEtB,KAAK,CAAC0C,IAAN,CAAWpB,MALc;AAMjCE,IAAAA,OAAO,EAAExB,KAAK,CAAC0C,IAAN,CAAWlB,OANa;AAOjCc,IAAAA,OAAO,EAAEtC,KAAK,CAAC0C,IAAN,CAAWJ,OAPa;AAQjCnD,IAAAA,QAAQ,EAAEa,KAAK,CAACwC,QAAN,CAAerD;AARQ,GAAL;AAAA,CAA7B;;AAWA,IAAMwD,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,SAAI7D,kBAAkB,CAAC;AACxDD,IAAAA,IAAI,EAAE,cAAC+D,IAAD;AAAA,aAAU/D,KAAI,CAAC+D,IAAD,CAAd;AAAA,KADkD;AAExDzD,IAAAA,WAAW,EAAXA;AAFwD,GAAD,EAGtDwD,QAHsD,CAAtB;AAAA,CAAnC;;AAKA,eAAe5D,OAAO,CACpBuD,eADoB,EAEpBI,kBAFoB,CAAP,CAGbnD,IAHa,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { push } from 'connected-react-router'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport './style.scss'\nimport SocketListener from 'containers/SocketListener/PingP'\nimport Canvas from 'components/canvas'\nimport { gameOver } from 'sockets/PingP/host'\nimport { setGameOver, powerUpUsedGameplay } from 'actions/PingP/gameplay'\nimport ReactGA from 'react-ga';\nimport localSetup from 'config/local'\n\nclass Home extends Component {\n\tconstructor(props){\n\t\tconsole.log('localSetup',localSetup)\n\t\tsuper(props)\n\t\tthis.timeouts = []\n\t\tthis.powerUpDuration = 5000\n\t\tthis.player1PowerUpTimeout = null\n\t\tthis.player1PowerUpTimeout = null\n\t\tthis.speed = 1\n\t\tthis.state = {\n\t\t\theight: window.innerHeight,\n\t\t\twidth:window.innerWidth,\n\t\t\tyDir: 0,\n\t\t\tyDir2: 0,\n\t\t\tis2Player: false,\n\t\t\tcountdown: false,\n\t\t\tisPlaying: false,\n\t\t\tcountdownNumber: '3',\n\t\t\tgameOver: false,\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.initialiseAnalytics()\n\t\twindow.addEventListener(\"resize\", () => {\n\t\t\tthis.setState({height:window.innerHeight - 75, width: window.innerWidth})\n\t\t});\n\t}\n\n\tinitialiseAnalytics(){\n \t\tReactGA.initialize('UA-135889592-1');\n\t\tReactGA.pageview('/player');\n\t}\n\n\tcomponentWillUnmount(){\n\t\tclearTimeout(this.player1PowerUpTimeout)\n\t\tclearTimeout(this.player2PowerUpTimeout)\n\t\tfor (var i = 0; i < this.timeouts.length; i++){\n\t\t\tclearTimeout(this.timeouts[i])\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(np){\n\t\t//new player 1 data\n\t\tif (this.state.yDir !== np.coords.y){\n\t\t\tthis.setState({yDir:np.coords.y})\n\t\t}\n\t\t//new player 2 data\n\t\tif (this.state.yDir2 !== np.coords2.y){\n\t\t\tthis.setState({yDir2:np.coords2.y, is2Player:true})\n\t\t}\n\t\t//start game\n\t\tif (!this.props.gameIsStarted && np.gameIsStarted){\n\t\t\tthis.startGame()\n\t\t} \n\t\t//start a subsequent game\n\t\tif (this.props.gameOver && !np.gameOver){\n\t\t\tthis.setState({countdownNumber: '3', countdown: true, isPlaying: false, gameOver: false}, () => {\n\t\t\t\tthis.startGame()\n\t\t\t})\n\t\t}\n\t\t//game over \n\t\tif (!this.props.gameOver && np.gameOver){\n\t\t\tthis.clearPowerUps()\n\t\t\tthis.setState({gameOver: true})\n\t\t}\n\t\t//stop game\n\t\telse if (this.props.gameIsStarted && !np.gameIsStarted){\n\t\t\tfor (var i = 0; i < this.timeouts.length; i++){\n\t\t\t\tclearTimeout(this.timeouts[i])\n\t\t\t}\n\t\t\tthis.setState({isPlaying: false, countdown: false, countdownNumber: '3'})\n\t\t} \n\t}\n\n\n\tstartGame(){\n\t\tfor (var i = 0; i < this.timeouts.length; i++){\n\t\t\tclearTimeout(this.timeouts[i])\n\t\t}\n\t\tthis.countdown('3', 0, true, 0)\n\t\tthis.countdown('2', 1000, true, 1)\n\t\tthis.countdown('1', 2000, true, 2)\n\t\tthis.countdown('3', 3000, false, 3)\n\t}\n\n\tcountdown(n, delay, show, timeoutIndex){\n\t\tthis.timeouts[timeoutIndex] = setTimeout(() => {\n\t\t\tthis.setState({countdownNumber: n, countdown: show, isPlaying: !show})\n\t\t},delay)\n\t}\n\n\tgameOver(winner){\n\t\tgameOver(this, winner)\n\t}\n\n\t// powerUpGained(player){\n\t// \tlet obj = {\n\t// \t\tplayerData: this.props.players[player-1],\n\t// \t\tplayerNumber: player\n\t// \t}\n\t// \tif(this.props.players[player-1]){\n\t// \t\tpowerUpGained(obj)\n\t// \t}\n\t// }\n\n\t// clearPowerUps(){\n\t// \t//reset power ups\n\t// \tconst obj = {\n\t// \t\tplayerNumber: 1,\n\t// \t\tpowerUp: false\n\t// \t}\n\t\t\n\t// \tconst obj2 = {\n\t// \t\tplayerNumber: 2,\n\t// \t\tpowerUp: false\n\t// \t}\n\t// \tthis.props.powerUpUsedGameplay(obj)\n\t// \tthis.props.powerUpUsedGameplay(obj2)\t\n\t// }\n\n\trender(){\n\t\t\n\t\t\n\t\t\t\n\t\treturn(\n\t\t\t<div className=\"home\">\n\t\t\t\t<SocketListener isHost socket={this.props.socket}/>\n\t\t\t\t<Canvas\n\t\t\t\t\tplayer1PowerUp={this.props.player1PowerUp}\n\t\t\t\t\tplayer2PowerUp={this.props.player2PowerUp}\n\t\t\t\t\tscored={this.clearPowerUps.bind(this)}\n\t\t\t\t\t\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\tisGameOver={this.state.gameOver}\n\t\t\t\t\tgameOver={this.gameOver.bind(this)}\n\t\t\t\t\tisPlaying={this.props.gameIsStarted}\n\t\t\t\t\tisPlaying={this.state.isPlaying}\n\t\t\t\t\tyDir={this.state.yDir}\n\t\t\t\t\tyDir2={this.state.yDir2}\n\t\t\t\t\tis2Player={this.props.players.length == 2}\n\t\t\t\t\tnumOfPlayers={this.props.players.length}/>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"code\">\n\t\t\t\t\t\t<div className=\"headerContainer\">\n\t\t\t\t\t\t\t{/*!this.props.gameIsStarted &&\n\t\t\t\t\t\t\t\t<div className=\"socials\">\n\t\t\t\t\t\t\t\t\t<a href=\"https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.pingp.co&t=Online%202%20Plsayer%20Pong\" target=\"blank\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"social\" style={{backgroundImage: 'url(' + require('assets/images/facebook.png')+ ')'}} />\n\t\t\t \t\t\t\t\t\t</a>\n\t\t\t \t\t\t\t\t\t<a href=\"http://twitter.com/share?text=You%20have%20got%20to%20play%20this&url=http%3A%2F%2Fwww.pingp.co&hashtags=funAndGames\" target=\"blank\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"social\" style={{backgroundImage: 'url(' + require('assets/images/twitter.png')+ ')'}} />\n\t\t\t \t\t\t\t\t\t</a>\n\t\t \t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t*/}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{this.state.countdown &&\n\t\t\t\t\t\t\t\t<h1 className=\"qr\">{this.state.countdownNumber}</h1>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t\t<h1 className=\"qr\">Game over</h1>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\t// player1PowerUp: state.gameplay.player1PowerUp,\n\t// player2PowerUp: state.gameplay.player2PowerUp,\n\tgameIsStarted: state.gameplay.gameIsStarted,\n\troomCode: state.host.roomCode,\n\tcoords: state.host.coords,\n\tcoords2: state.host.coords2,\n\tplayers: state.host.players,\n\tgameOver: state.gameplay.gameOver,\n})\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  push: (path) => push(path),\n  setGameOver,\n}, dispatch)\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Home)"]},"metadata":{},"sourceType":"module"}