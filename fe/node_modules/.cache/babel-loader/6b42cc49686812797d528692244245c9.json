{"ast":null,"code":"import _defineProperty from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bobby.hewitt/Documents/test/ops/fe/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Mobile/index.js\";\nimport React, { Component } from 'react';\nimport { push as _push } from 'connected-react-router';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport './style.scss';\nimport SocketListener from 'containers/SocketListener/PingP';\nimport { sendOrientation, startGameSocket, quitGameSocket, restartGameSocket } from 'sockets/PingP/player';\nimport { setSelf } from 'actions/PingP/player';\nimport { startGame, setGameOver } from 'actions/PingP/gameplay';\nimport ReactGA from 'react-ga';\n\nvar Mobile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Mobile, _Component);\n\n  function Mobile(props) {\n    var _this;\n\n    _classCallCheck(this, Mobile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Mobile).call(this, props));\n    _this.state = {\n      xDir: 0,\n      yDir: 0,\n      dir: 'equal',\n      visualSpeed: 0\n    };\n    _this.speeds = ['-6', '-5', '-4', '-3', '-2', '-1', '0', '1', '2', '3', '4', '5', '6'];\n    return _this;\n  }\n\n  _createClass(Mobile, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.initialiseAnalytics();\n    }\n  }, {\n    key: \"initialiseAnalytics\",\n    value: function initialiseAnalytics() {\n      ReactGA.initialize('UA-135889592-1');\n      ReactGA.pageview('/player');\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(np) {\n      if (!np.playerNumber && this.props.playerNumber) {\n        this.props.push('not-found');\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      window.addEventListener('deviceorientation', function (orientation) {\n        var _this2$findLimit = _this2.findLimit(orientation.beta),\n            y = _this2$findLimit.y,\n            dir = _this2$findLimit.dir,\n            visualSpeed = _this2$findLimit.visualSpeed;\n\n        if (y !== _this2.state.yDir) {\n          var dirs = {\n            y: y,\n            playerNumber: _this2.props.playerNumber\n          };\n          sendOrientation(dirs, _this2, _this2.props.socket);\n\n          _this2.setState({\n            yDir: y,\n            visualSpeed: visualSpeed,\n            dir: dir\n          });\n        }\n      });\n    }\n  }, {\n    key: \"findLimit\",\n    value: function findLimit(coord) {\n      var _ref;\n\n      // if (coord < -27.5 + 45) return {y: -20, dir: 'down', visualSpeed: 5}\n      if (coord < -35 + 45) return {\n        y: -12,\n        dir: 'down',\n        visualSpeed: 4\n      };else if (coord < -25 + 45) return {\n        y: -9,\n        dir: 'down',\n        visualSpeed: 3\n      };else if (coord < -15 + 45) return {\n        y: -6,\n        dir: 'down',\n        visualSpeed: 2\n      };else if (coord < -5 + 45) return {\n        y: -3,\n        dir: 'down',\n        visualSpeed: 1\n      };else if (coord < 5 + 45) return {\n        y: 0,\n        dir: 'equal',\n        visualSpeed: 0\n      };else if (coord < 15 + 45) return {\n        y: 3,\n        dir: 'up',\n        visualSpeed: 1\n      };else if (coord < 25 + 45) return {\n        y: 6,\n        dir: 'up',\n        visualSpeed: 2\n      };else if (coord < 35 + 45) return {\n        y: 9,\n        dir: 'up',\n        visualSpeed: 3 // else if (coord < 45 + 45) return {y: 16, dir: 'up', visualSpeed: 4}\n\n      };else return _ref = {\n        y: 12,\n        dir: '+'\n      }, _defineProperty(_ref, \"dir\", 'up'), _defineProperty(_ref, \"visualSpeed\", 4), _ref;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"mobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(SocketListener, {\n        socket: this.props.socket,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"gamePadContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"gamePad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"instructionsMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Tilt phone to control paddle\"), this.props.gameOver && React.createElement(\"p\", {\n        className: \"playerResult\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, this.props.winner.indexOf(this.props.playerNumber) > -1 ? 'You win' : 'You lose'), React.createElement(\"div\", {\n        className: \"speedContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.dir === 'up' && Array.apply(null, {\n        length: this.state.visualSpeed\n      }).map(function (e, i) {\n        return React.createElement(\"div\", {\n          key: i,\n          className: \" fontawesome chevronUp\",\n          style: {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        });\n      }), this.state.dir === 'down' && Array.apply(null, {\n        length: this.state.visualSpeed\n      }).map(function (e, i) {\n        return React.createElement(\"div\", {\n          key: i,\n          className: \" fontawesome chevronDown\",\n          style: {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        });\n      }), this.state.dir === 'equal' && React.createElement(\"div\", {\n        className: \"equal fontawesome \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"buttonSetMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pausePlay buttonMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, !this.props.gameIsStarted && !this.props.gameOver && React.createElement(\"img\", {\n        src: require('assets/images/playBlack.png'),\n        className: \"play\",\n        onClick: startGameSocket.bind(this, this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), this.props.gameIsStarted && !this.props.gameOver && React.createElement(\"img\", {\n        src: require('assets/images/pauseBlack.png'),\n        onClick: startGameSocket.bind(this, this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), this.props.gameOver && React.createElement(\"img\", {\n        src: require('assets/images/playBlack.png'),\n        className: \"play\",\n        onClick: restartGameSocket.bind(this, this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), !this.props.gameOver && React.createElement(\"p\", {\n        className: \"headerMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Player\", JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber), \" \"), this.props.gameOver && React.createElement(\"p\", {\n        className: \"headerMobile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Player\", JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber), \" \"), React.createElement(\"div\", {\n        className: \"buttonMobile warning quit\",\n        onClick: quitGameSocket.bind(this, this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Quit\")))));\n    }\n  }]);\n\n  return Mobile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    gameIsStarted: state.gameplay.gameIsStarted,\n    router: state.router,\n    room: state.player.room,\n    playerNumber: state.player.playerNumber,\n    gameOver: state.gameplay.gameOver,\n    winner: state.gameplay.winner\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    push: function push(path) {\n      return _push(path);\n    },\n    setSelf: setSelf,\n    setGameOver: setGameOver,\n    startGame: startGame\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Mobile);","map":{"version":3,"sources":["/Users/bobby.hewitt/Documents/test/ops/fe/src/containers/PingP/Mobile/index.js"],"names":["React","Component","push","bindActionCreators","connect","SocketListener","sendOrientation","startGameSocket","quitGameSocket","restartGameSocket","setSelf","startGame","setGameOver","ReactGA","Mobile","props","state","xDir","yDir","dir","visualSpeed","speeds","initialiseAnalytics","initialize","pageview","np","playerNumber","window","addEventListener","orientation","findLimit","beta","y","dirs","socket","setState","coord","gameOver","winner","indexOf","Array","apply","length","map","e","i","gameIsStarted","require","bind","JSON","stringify","mapStateToProps","gameplay","router","room","player","mapDispatchToProps","dispatch","path"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAI,IAAJA,KAAT,QAAqB,wBAArB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,cAAP;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,SAASC,eAAT,EAA0BC,eAA1B,EAA2CC,cAA3C,EAA2DC,iBAA3D,QAAoF,sBAApF;AACA,SAASC,OAAT,QAAyB,sBAAzB;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,wBAAvC;AACA,OAAOC,OAAP,MAAoB,UAApB;;IAEMC,M;;;;;AACL,kBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,IAAI,EAAE,CADM;AAEZC,MAAAA,IAAI,EAAE,CAFM;AAGZC,MAAAA,GAAG,EAAE,OAHO;AAIZC,MAAAA,WAAW,EAAE;AAJD,KAAb;AAMA,UAAKC,MAAL,GAAc,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,GAA/B,EAAmC,GAAnC,EAAuC,GAAvC,EAA2C,GAA3C,EAA+C,GAA/C,EAAmD,GAAnD,EAAuD,GAAvD,CAAd;AARiB;AASjB;;;;yCAEmB;AACnB,WAAKC,mBAAL;AACA;;;0CAEoB;AACnBT,MAAAA,OAAO,CAACU,UAAR,CAAmB,gBAAnB;AACDV,MAAAA,OAAO,CAACW,QAAR,CAAiB,SAAjB;AACA;;;8CAEyBC,E,EAAG;AAC5B,UAAI,CAACA,EAAE,CAACC,YAAJ,IAAoB,KAAKX,KAAL,CAAWW,YAAnC,EAAgD;AAC/C,aAAKX,KAAL,CAAWb,IAAX,CAAgB,WAAhB;AACA;AACD;;;wCAEkB;AAAA;;AAClByB,MAAAA,MAAM,CAACC,gBAAP,CAAwB,mBAAxB,EAA6C,UAACC,WAAD,EAAiB;AAAA,+BAChC,MAAI,CAACC,SAAL,CAAeD,WAAW,CAACE,IAA3B,CADgC;AAAA,YACxDC,CADwD,oBACxDA,CADwD;AAAA,YACrDb,GADqD,oBACrDA,GADqD;AAAA,YAChDC,WADgD,oBAChDA,WADgD;;AAE7D,YAAIY,CAAC,KAAK,MAAI,CAAChB,KAAL,CAAWE,IAArB,EAA0B;AACzB,cAAIe,IAAI,GAAG;AACVD,YAAAA,CAAC,EAAEA,CADO;AAEVN,YAAAA,YAAY,EAAE,MAAI,CAACX,KAAL,CAAWW;AAFf,WAAX;AAIApB,UAAAA,eAAe,CAAC2B,IAAD,EAAO,MAAP,EAAa,MAAI,CAAClB,KAAL,CAAWmB,MAAxB,CAAf;;AACA,UAAA,MAAI,CAACC,QAAL,CAAc;AAACjB,YAAAA,IAAI,EAAEc,CAAP;AAAUZ,YAAAA,WAAW,EAAXA,WAAV;AAAuBD,YAAAA,GAAG,EAAHA;AAAvB,WAAd;AACA;AACD,OAVD;AAWA;;;8BAESiB,K,EAAM;AAAA;;AACf;AACA,UAAIA,KAAK,GAAG,CAAC,EAAD,GAAM,EAAlB,EAAsB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAC,EAAL;AAASb,QAAAA,GAAG,EAAE,MAAd;AAAsBC,QAAAA,WAAW,EAAE;AAAnC,OAAP,CAAtB,KACK,IAAIgB,KAAK,GAAG,CAAC,EAAD,GAAM,EAAlB,EAAsB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAC,CAAL;AAAQb,QAAAA,GAAG,EAAE,MAAb;AAAqBC,QAAAA,WAAW,EAAE;AAAlC,OAAP,CAAtB,KACA,IAAIgB,KAAK,GAAG,CAAC,EAAD,GAAM,EAAlB,EAAsB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAC,CAAL;AAAQb,QAAAA,GAAG,EAAE,MAAb;AAAqBC,QAAAA,WAAW,EAAE;AAAlC,OAAP,CAAtB,KACA,IAAIgB,KAAK,GAAG,CAAC,CAAD,GAAK,EAAjB,EAAqB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAC,CAAL;AAAQb,QAAAA,GAAG,EAAE,MAAb;AAAqBC,QAAAA,WAAW,EAAE;AAAlC,OAAP,CAArB,KACA,IAAIgB,KAAK,GAAG,IAAI,EAAhB,EAAoB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAJ;AAAOb,QAAAA,GAAG,EAAE,OAAZ;AAAqBC,QAAAA,WAAW,EAAE;AAAlC,OAAP,CAApB,KACA,IAAIgB,KAAK,GAAG,KAAK,EAAjB,EAAqB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAJ;AAAOb,QAAAA,GAAG,EAAE,IAAZ;AAAkBC,QAAAA,WAAW,EAAE;AAA/B,OAAP,CAArB,KACA,IAAIgB,KAAK,GAAG,KAAK,EAAjB,EAAqB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAJ;AAAOb,QAAAA,GAAG,EAAE,IAAZ;AAAkBC,QAAAA,WAAW,EAAE;AAA/B,OAAP,CAArB,KACA,IAAIgB,KAAK,GAAG,KAAK,EAAjB,EAAqB,OAAO;AAACJ,QAAAA,CAAC,EAAE,CAAJ;AAAOb,QAAAA,GAAG,EAAE,IAAZ;AAAkBC,QAAAA,WAAW,EAAE,CAA/B,CACjC;;AADiC,OAAP,CAArB,KAEA;AAAQY,QAAAA,CAAC,EAAE,EAAX;AAAeb,QAAAA,GAAG,EAAE;AAApB,sCAA8B,IAA9B,wCAAiD,CAAjD;AACL;;;6BAIO;AACP,aACC;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,cAAD;AAAgB,QAAA,MAAM,EAAE,KAAKJ,KAAL,CAAWmB,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,EAEC;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADD,EAEE,KAAKnB,KAAL,CAAWsB,QAAX,IACA;AAAG,QAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6B,KAAKtB,KAAL,CAAWuB,MAAX,CAAkBC,OAAlB,CAA0B,KAAKxB,KAAL,CAAWW,YAArC,IAAqD,CAAC,CAAtD,GAA0D,SAA1D,GAAsE,UAAnG,CAHF,EAMC;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,KAAKV,KAAL,CAAWG,GAAX,KAAmB,IAAnB,IAA2BqB,KAAK,CAACC,KAAN,CAAY,IAAZ,EAAkB;AAAEC,QAAAA,MAAM,EAAE,KAAK1B,KAAL,CAAWI;AAArB,OAAlB,EAAsDuB,GAAtD,CAA0D,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC/F,eACC;AAAK,UAAA,GAAG,EAAEA,CAAV;AAAa,UAAA,SAAS,EAAC,wBAAvB;AAAgD,UAAA,KAAK,EAAE,EAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAGA,OAJ2B,CAD7B,EAME,KAAK7B,KAAL,CAAWG,GAAX,KAAmB,MAAnB,IAA6BqB,KAAK,CAACC,KAAN,CAAY,IAAZ,EAAkB;AAAEC,QAAAA,MAAM,EAAE,KAAK1B,KAAL,CAAWI;AAArB,OAAlB,EAAsDuB,GAAtD,CAA0D,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACjG,eACC;AAAK,UAAA,GAAG,EAAEA,CAAV;AAAa,UAAA,SAAS,EAAC,0BAAvB;AAAkD,UAAA,KAAK,EAAE,EAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAGA,OAJ6B,CAN/B,EAWE,KAAK7B,KAAL,CAAWG,GAAX,KAAmB,OAAnB,IAA8B;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXhC,CAND,CADF,CAFD,EAyBC;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,CAAC,KAAKJ,KAAL,CAAW+B,aAAZ,IAA6B,CAAC,KAAK/B,KAAL,CAAWsB,QAAzC,IACA;AAAK,QAAA,GAAG,EAAEU,OAAO,CAAC,6BAAD,CAAjB;AAAkD,QAAA,SAAS,EAAC,MAA5D;AAAmE,QAAA,OAAO,EAAExC,eAAe,CAACyC,IAAhB,CAAqB,IAArB,EAA2B,IAA3B,CAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAIE,KAAKjC,KAAL,CAAW+B,aAAX,IAA4B,CAAC,KAAK/B,KAAL,CAAWsB,QAAxC,IACA;AAAK,QAAA,GAAG,EAAEU,OAAO,CAAC,8BAAD,CAAjB;AAAmD,QAAA,OAAO,EAAExC,eAAe,CAACyC,IAAhB,CAAqB,IAArB,EAA2B,IAA3B,CAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,EAOE,KAAKjC,KAAL,CAAWsB,QAAX,IACA;AAAK,QAAA,GAAG,EAAEU,OAAO,CAAC,6BAAD,CAAjB;AAAkD,QAAA,SAAS,EAAC,MAA5D;AAAmE,QAAA,OAAO,EAAEtC,iBAAiB,CAACuC,IAAlB,CAAuB,IAAvB,EAA6B,IAA7B,CAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,CADD,EAYE,CAAC,KAAKjC,KAAL,CAAWsB,QAAZ,IACA;AAAG,QAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAmCY,IAAI,CAACC,SAAL,CAAe,KAAKnC,KAAL,CAAWW,YAA1B,MAA4C,MAA5C,GAAqD,CAArD,GAAyDuB,IAAI,CAACC,SAAL,CAAe,KAAKnC,KAAL,CAAWW,YAA1B,CAA5F,MAbF,EAeE,KAAKX,KAAL,CAAWsB,QAAX,IACA;AAAG,QAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAmCY,IAAI,CAACC,SAAL,CAAe,KAAKnC,KAAL,CAAWW,YAA1B,MAA4C,MAA5C,GAAqD,CAArD,GAAyDuB,IAAI,CAACC,SAAL,CAAe,KAAKnC,KAAL,CAAWW,YAA1B,CAA5F,MAhBF,EAkBC;AAAK,QAAA,SAAS,EAAC,2BAAf;AAA2C,QAAA,OAAO,EAAElB,cAAc,CAACwC,IAAf,CAAoB,IAApB,EAA0B,IAA1B,CAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,CAlBD,CADD,CAzBD,CADD;AAoDA;;;;EA9GmB/C,S;;AAiHrB,IAAMkD,eAAe,GAAG,SAAlBA,eAAkB,CAAAnC,KAAK;AAAA,SAAK;AACjC8B,IAAAA,aAAa,EAAE9B,KAAK,CAACoC,QAAN,CAAeN,aADG;AAEjCO,IAAAA,MAAM,EAAErC,KAAK,CAACqC,MAFmB;AAGjCC,IAAAA,IAAI,EAAEtC,KAAK,CAACuC,MAAN,CAAaD,IAHc;AAIjC5B,IAAAA,YAAY,EAAEV,KAAK,CAACuC,MAAN,CAAa7B,YAJM;AAKjCW,IAAAA,QAAQ,EAAErB,KAAK,CAACoC,QAAN,CAAef,QALQ;AAMjCC,IAAAA,MAAM,EAAEtB,KAAK,CAACoC,QAAN,CAAed;AANU,GAAL;AAAA,CAA7B;;AASA,IAAMkB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,SAAItD,kBAAkB,CAAC;AACxDD,IAAAA,IAAI,EAAE,cAACwD,IAAD;AAAA,aAAUxD,KAAI,CAACwD,IAAD,CAAd;AAAA,KADkD;AAExDhD,IAAAA,OAAO,EAAPA,OAFwD;AAGxDE,IAAAA,WAAW,EAAXA,WAHwD;AAIxDD,IAAAA,SAAS,EAATA;AAJwD,GAAD,EAKtD8C,QALsD,CAAtB;AAAA,CAAnC;;AAOA,eAAerD,OAAO,CACpB+C,eADoB,EAEpBK,kBAFoB,CAAP,CAGb1C,MAHa,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { push } from 'connected-react-router'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport './style.scss'\nimport SocketListener from 'containers/SocketListener/PingP'\nimport { sendOrientation, startGameSocket, quitGameSocket, restartGameSocket } from 'sockets/PingP/player'\nimport { setSelf  } from 'actions/PingP/player'\nimport { startGame, setGameOver } from 'actions/PingP/gameplay'\nimport ReactGA from 'react-ga';\n\nclass Mobile extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\txDir: 0,\n\t\t\tyDir: 0,\n\t\t\tdir: 'equal',\n\t\t\tvisualSpeed: 0,\n\t\t}\n\t\tthis.speeds = ['-6','-5','-4','-3','-2','-1','0','1','2','3','4','5','6']\n\t}\n\n\tcomponentWillMount(){ \n\t\tthis.initialiseAnalytics()\n\t}\n\n\tinitialiseAnalytics(){\n \t\tReactGA.initialize('UA-135889592-1');\n\t\tReactGA.pageview('/player');\n\t}\n\n\tcomponentWillReceiveProps(np){\n\t\tif (!np.playerNumber && this.props.playerNumber){\n\t\t\tthis.props.push('not-found')\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n\t\twindow.addEventListener('deviceorientation', (orientation) => {\n\t\t\tlet {y, dir, visualSpeed } = this.findLimit(orientation.beta)\n\t\t\tif (y !== this.state.yDir){\t\t\t\t\n\t\t\t\tlet dirs = {\n\t\t\t\t\ty: y,\n\t\t\t\t\tplayerNumber: this.props.playerNumber\n\t\t\t\t}\n\t\t\t\tsendOrientation(dirs, this, this.props.socket)\n\t\t\t\tthis.setState({yDir: y, visualSpeed, dir})\n\t\t\t}\n\t\t})\n\t}\n\n\tfindLimit(coord){\n\t\t// if (coord < -27.5 + 45) return {y: -20, dir: 'down', visualSpeed: 5}\n\t\tif (coord < -35 + 45) return {y: -12, dir: 'down', visualSpeed: 4}\n\t\telse if (coord < -25 + 45) return {y: -9, dir: 'down', visualSpeed: 3}\n\t\telse if (coord < -15 + 45) return {y: -6, dir: 'down', visualSpeed: 2}\n\t\telse if (coord < -5 + 45) return {y: -3, dir: 'down', visualSpeed: 1}\n\t\telse if (coord < 5 + 45) return {y: 0, dir: 'equal', visualSpeed: 0}\n\t\telse if (coord < 15 + 45) return {y: 3, dir: 'up', visualSpeed: 1}\n\t\telse if (coord < 25 + 45) return {y: 6, dir: 'up', visualSpeed: 2}\n\t\telse if (coord < 35 + 45) return {y: 9, dir: 'up', visualSpeed: 3}\n\t\t// else if (coord < 45 + 45) return {y: 16, dir: 'up', visualSpeed: 4}\n\t\telse return {y: 12, dir: '+', dir: 'up', visualSpeed: 4}\n\t}\n\n\n\n\trender(){\n\t\treturn(\n\t\t\t<div className=\"mobile\">\n\t\t\t\t<SocketListener socket={this.props.socket}/>\n\t\t\t\t<div className=\"gamePadContainer\">\n\t\t\t\t\t\t<div className=\"gamePad\">\n\t\t\t\t\t\t\t<p className=\"instructionsMobile\">Tilt phone to control paddle</p>\n\t\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t\t<p className=\"playerResult\">{this.props.winner.indexOf(this.props.playerNumber) > -1 ? 'You win' : 'You lose'}</p>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className=\"speedContainer\">\n\t\t\t\t\t\t\t\t{this.state.dir === 'up' && Array.apply(null, { length: this.state.visualSpeed }).map((e, i) => {\n\t\t\t\t\t\t\t\t\treturn(\t\n\t\t\t\t\t\t\t\t\t\t<div key={i} className=\" fontawesome chevronUp\" style={{}}/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{this.state.dir === 'down' && Array.apply(null, { length: this.state.visualSpeed }).map((e, i) => {\n\t\t\t\t\t\t\t\t\treturn(\t\n\t\t\t\t\t\t\t\t\t\t<div key={i} className=\" fontawesome chevronDown\" style={{}}/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t{this.state.dir === 'equal' && <div className=\"equal fontawesome \" />}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"info\">\t\n\t\t\t\t\t<div className=\"buttonSetMobile\">\n\t\t\t\t\t\t<div className=\"pausePlay buttonMobile\">\n\t\t\t\t\t\t\t{!this.props.gameIsStarted && !this.props.gameOver &&\n\t\t\t\t\t\t\t\t<img src={require('assets/images/playBlack.png')} className=\"play\" onClick={startGameSocket.bind(this, this)}/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.props.gameIsStarted && !this.props.gameOver &&\n\t\t\t\t\t\t\t\t<img src={require('assets/images/pauseBlack.png')} onClick={startGameSocket.bind(this, this)}/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t\t<img src={require('assets/images/playBlack.png')} className=\"play\" onClick={restartGameSocket.bind(this, this)}/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!this.props.gameOver &&\n\t\t\t\t\t\t\t<p className=\"headerMobile\">Player{JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber)} </p>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{this.props.gameOver &&\n\t\t\t\t\t\t\t<p className=\"headerMobile\">Player{JSON.stringify(this.props.playerNumber) === 'null' ? 0 : JSON.stringify(this.props.playerNumber)} </p>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div className=\"buttonMobile warning quit\" onClick={quitGameSocket.bind(this, this)} >\n\t\t\t\t\t\t\t<p>Quit</p>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t</div>\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tgameIsStarted: state.gameplay.gameIsStarted,\n\trouter: state.router,\n\troom: state.player.room,\n\tplayerNumber: state.player.playerNumber,\n\tgameOver: state.gameplay.gameOver,\n\twinner: state.gameplay.winner,\n})\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  push: (path) => push(path),\n  setSelf,\n  setGameOver,\n  startGame,\n}, dispatch)\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Mobile)"]},"metadata":{},"sourceType":"module"}