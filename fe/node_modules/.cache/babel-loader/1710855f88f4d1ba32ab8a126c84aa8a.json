{"ast":null,"code":"import openSocket from 'socket.io-client'; // const  socket = openSocket('172.23.150.213:9000');\n\nvar socket = openSocket('https://bping.herokuapp.com');\n\nfunction subscribeToPlayerEvents(self, cb) {\n  console.log('SUBSCRIBING TO PLAYER');\n  socket.on('success-joining-room', successJoiningRoom.bind(this, self));\n  socket.on('error-joining-room', errorJoiningRoom.bind(this));\n  socket.on('start-round', startRound.bind(this, self));\n  socket.on('start-game', gameStarted.bind(this, cb));\n  socket.on('room-full', roomFull.bind(this, self));\n  socket.on('host-quit', hostQuit.bind(this, self));\n  socket.on('restart-game', restartGame.bind(this, cb));\n  socket.on('game-over', gameOver.bind(this, self));\n  socket.on('power-up-gained', powerUpGained.bind(this, self));\n}\n\nfunction getPowerup() {\n  var powerups = ['invertOpponent'];\n  var r = Math.floor(Math.random() * powerups.length);\n  return powerups[r];\n}\n\nfunction powerUpGained(self, data) {\n  self.props.powerUpGained(getPowerup());\n}\n\nfunction powerUpUsedSocket(data, self) {\n  emit('power-up-used', data);\n  self.props.powerUpUsed();\n}\n\nfunction roomFull(self) {\n  self.props.push('pingp/full');\n}\n\nfunction hostQuit(self) {\n  self.props.push('pingp/not-found');\n}\n\nfunction gameOver(self, data) {\n  self.props.setGameOver(true, data); // cb('setGameOver', true)\n}\n\nfunction successJoiningRoom(self, data) {\n  self.props.setPlayerRoom(data.result);\n  self.props.setPlayerNumber(data.playerNumber);\n}\n\nfunction errorJoiningRoom() {}\n\nfunction startRound(self) {\n  self.props.push('player/buzzer');\n}\n\nfunction buzz(self) {\n  var data = {\n    room: self.props.room.long,\n    player: self.props.self,\n    time: new Date().getTime()\n  };\n  emit('player-buzz', data);\n  self.props.push('player/waiting');\n}\n\nfunction sendOrientation(coords, self) {\n  if (self.props.room) {\n    var data = {\n      room: self.props.room.long,\n      coords: coords\n    };\n    emit('device-orientation', data);\n  }\n}\n\nfunction restartGame(cb) {\n  cb('setGameOver', false);\n} // emit\n\n\nfunction startGameSocket(self) {\n  self.props.startGame();\n  emit('start-game', self.props.room.long);\n} // emit\n\n\nfunction quitGameSocket(self) {\n  self.props.startGame();\n  emit('quit-game-player', self.props.room.long);\n}\n\nfunction restartGameSocket(self) {\n  emit('restart-game', self.props.room.long);\n  self.props.setGameOver(false);\n}\n\nfunction gameStarted(cb) {\n  cb('startGame', false);\n}\n\nfunction joinRoom(data, self) {\n  data.id = socket.id;\n  self.props.setSelf(data);\n  emit('player-join-room', data);\n}\n\nfunction emit(action, data) {\n  socket.emit(action, data);\n}\n\nexport { powerUpUsedSocket, restartGameSocket, quitGameSocket, startGameSocket, sendOrientation, subscribeToPlayerEvents, joinRoom, buzz };","map":{"version":3,"sources":["/Users/bobby.hewitt/Documents/test/ops/fe/src/sockets/player.js"],"names":["openSocket","socket","subscribeToPlayerEvents","self","cb","console","log","on","successJoiningRoom","bind","errorJoiningRoom","startRound","gameStarted","roomFull","hostQuit","restartGame","gameOver","powerUpGained","getPowerup","powerups","r","Math","floor","random","length","data","props","powerUpUsedSocket","emit","powerUpUsed","push","setGameOver","setPlayerRoom","result","setPlayerNumber","playerNumber","buzz","room","long","player","time","Date","getTime","sendOrientation","coords","startGameSocket","startGame","quitGameSocket","restartGameSocket","joinRoom","id","setSelf","action"],"mappings":"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","sourcesContent":["import openSocket from 'socket.io-client';\n// const  socket = openSocket('172.23.150.213:9000');\nconst  socket = openSocket('https://bping.herokuapp.com');\n\nfunction subscribeToPlayerEvents(self, cb) {\n\tconsole.log('SUBSCRIBING TO PLAYER')\n\tsocket.on('success-joining-room', successJoiningRoom.bind(this, self))\n\tsocket.on('error-joining-room', errorJoiningRoom.bind(this))\n\tsocket.on('start-round', startRound.bind(this, self))\n\tsocket.on('start-game', gameStarted.bind(this, cb))\n\tsocket.on('room-full', roomFull.bind(this, self))\n\tsocket.on('host-quit', hostQuit.bind(this, self))\n\tsocket.on('restart-game', restartGame.bind(this, cb))\n\tsocket.on('game-over', gameOver.bind(this, self))\n\tsocket.on('power-up-gained', powerUpGained.bind(this, self))\n}\n\nfunction getPowerup(){\n\tlet powerups = ['invertOpponent']\n    let r = Math.floor(Math.random() * powerups.length)\n    return powerups[r]\n}\n\nfunction powerUpGained(self, data){\n\tself.props.powerUpGained(getPowerup())\n}\n\nfunction powerUpUsedSocket(data, self){\t\n\temit('power-up-used', data)\n\tself.props.powerUpUsed()\n}\n\nfunction roomFull(self){\n\tself.props.push('pingp/full')\n}\n\nfunction hostQuit(self){\n\tself.props.push('pingp/not-found')\n}\n\nfunction gameOver(self, data){\n\tself.props.setGameOver(true, data)\n\t// cb('setGameOver', true)\n}\n\n\nfunction successJoiningRoom(self, data){\n\tself.props.setPlayerRoom(data.result)\n\tself.props.setPlayerNumber(data.playerNumber)\n}\nfunction errorJoiningRoom(){\n\n}\n\nfunction startRound(self){\n\tself.props.push('player/buzzer')\n}\n\nfunction buzz(self){\n\tlet data = {\n\t\troom: self.props.room.long,\n\t\tplayer: self.props.self,\n\t\ttime: (new Date).getTime()\n\t}\n\temit('player-buzz', data)\n\tself.props.push('player/waiting')\n}\n\nfunction sendOrientation(coords, self){\n\tif (self.props.room){\n\t\tlet data = {\n\t\t\troom: self.props.room.long,\n\t\t\tcoords: coords\n\t\t}\n\t\temit('device-orientation', data)\n\t}\n}\n\nfunction restartGame(cb){\n\tcb('setGameOver', false)\n}\n\n\n// emit\nfunction startGameSocket(self){\n\t\n\tself.props.startGame()\n\temit('start-game', self.props.room.long)\n}\n\n// emit\nfunction quitGameSocket(self){\n\tself.props.startGame()\n\temit('quit-game-player', self.props.room.long)\n}\n\n\nfunction restartGameSocket(self){\n\t\n\temit('restart-game', self.props.room.long)\n\tself.props.setGameOver(false)\t\n}\n\n\nfunction gameStarted(cb){\n\tcb('startGame', false)\n}\n\nfunction joinRoom(data, self){\n\tdata.id = socket.id\n\tself.props.setSelf(data)\n\temit('player-join-room', data)\n}\n\nfunction emit(action, data){\n\tsocket.emit(action, data)\n}\n\nexport { \n\tpowerUpUsedSocket,\n\trestartGameSocket,\n\tquitGameSocket,\n\tstartGameSocket,\n\tsendOrientation,\n\tsubscribeToPlayerEvents,\n\tjoinRoom,\n\tbuzz\n};"]},"metadata":{},"sourceType":"module"}