{"ast":null,"code":"import openSocket from 'socket.io-client';\nimport localSetup from 'config/local';\n\nfunction subscribeToPlayerEvents(self, socket, cb) {\n  console.log('SUBSCRIBING TO PLAYER');\n  socket.on('success-joining-room', successJoiningRoom.bind(this, self));\n  socket.on('error-joining-room', errorJoiningRoom.bind(this, socket));\n  socket.on('start-game', gameStarted.bind(this, cb, socket));\n  socket.on('room-full', roomFull.bind(this, self, socket));\n  socket.on('host-quit', hostQuit.bind(this, self, socket));\n  socket.on('restart-game', restartGame.bind(this, cb, socket));\n  socket.on('game-over', gameOver.bind(this, self, socket));\n  socket.on('chosen-game', chosenGame.bind(this, self, socket)); // socket.on('power-up-gained', powerUpGained.bind(this, self))\n} //sent to socket\n\n\nfunction chooseGame(data, socket) {\n  console.log(data, socket.emit);\n  emit('choose-game', data, socket);\n} //recieved from socket\n\n\nfunction chosenGame(self, socket, data) {\n  console.log(data);\n  self.props.push('m/' + data);\n}\n\nfunction joinRoom(data, self, socket) {\n  data.id = socket.id;\n  emit('player-join-room', data, socket);\n}\n\nfunction successJoiningRoom(self, data, info) {\n  // self.props.setPlayerRoom(data.result)\n  // self.props.setPlayerNumber(data.playerNumber)\n  self.props.setPlayerData(data);\n  self.props.push('m/home');\n}\n\nfunction errorJoiningRoom() {}\n\nfunction getPowerup() {\n  var powerups = ['invertOpponent'];\n  var r = Math.floor(Math.random() * powerups.length);\n  return powerups[r];\n} // function powerUpGained(self, data){\n// \tself.props.powerUpGained(getPowerup())\n// }\n\n\nfunction powerUpUsedSocket(data, self) {\n  emit('power-up-used', data);\n  self.props.powerUpUsed();\n}\n\nfunction roomFull(self) {\n  self.props.push('pingp/full');\n}\n\nfunction hostQuit(self) {\n  self.props.push('pingp/not-found');\n}\n\nfunction gameOver(self, data) {\n  self.props.setGameOver(true, data); // cb('setGameOver', true)\n}\n\nfunction sendOrientation(coords, self, socket) {\n  if (self.props.room) {\n    var data = {\n      room: self.props.room.long,\n      coords: coords\n    };\n    emit('device-orientation', data, socket);\n  }\n}\n\nfunction restartGame(cb) {\n  cb('setGameOver', false);\n}\n\nfunction startGameSocket(self, socket) {\n  self.props.startGame();\n  emit('start-game', self.props.room.long);\n}\n\nfunction quitGameSocket(self, sockt) {\n  self.props.startGame();\n  emit('quit-game-player', self.props.room.long);\n}\n\nfunction restartGameSocket(self, socket) {\n  emit('restart-game', self.props.room.long);\n  self.props.setGameOver(false);\n}\n\nfunction gameStarted(cb) {\n  cb('startGame', false);\n}\n\nfunction emit(action, data, socket) {\n  socket.emit(action, data);\n}\n\nexport { chooseGame, powerUpUsedSocket, restartGameSocket, quitGameSocket, startGameSocket, sendOrientation, subscribeToPlayerEvents, joinRoom };","map":{"version":3,"sources":["/Users/bobby.hewitt/Documents/test/ops/fe/src/sockets/player.js"],"names":["openSocket","localSetup","subscribeToPlayerEvents","self","socket","cb","console","log","on","successJoiningRoom","bind","errorJoiningRoom","gameStarted","roomFull","hostQuit","restartGame","gameOver","chosenGame","chooseGame","data","emit","props","push","joinRoom","id","info","setPlayerData","getPowerup","powerups","r","Math","floor","random","length","powerUpUsedSocket","powerUpUsed","setGameOver","sendOrientation","coords","room","long","startGameSocket","startGame","quitGameSocket","sockt","restartGameSocket","action"],"mappings":"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","sourcesContent":["import openSocket from 'socket.io-client';\nimport localSetup from 'config/local'\n\n\nfunction subscribeToPlayerEvents(self, socket, cb) {\n\tconsole.log('SUBSCRIBING TO PLAYER')\n\tsocket.on('success-joining-room', successJoiningRoom.bind(this, self))\n\tsocket.on('error-joining-room', errorJoiningRoom.bind(this, socket))\n\tsocket.on('start-game', gameStarted.bind(this, cb, socket))\n\tsocket.on('room-full', roomFull.bind(this, self, socket))\n\tsocket.on('host-quit', hostQuit.bind(this, self, socket))\n\tsocket.on('restart-game', restartGame.bind(this, cb, socket))\n\tsocket.on('game-over', gameOver.bind(this, self, socket))\n\tsocket.on('chosen-game', chosenGame.bind(this, self, socket))\n\t// socket.on('power-up-gained', powerUpGained.bind(this, self))\n}\n\n//sent to socket\nfunction chooseGame(data, socket){\n\tconsole.log(data, socket.emit)\n\temit('choose-game', data, socket)\n}\n\n//recieved from socket\nfunction chosenGame(self, socket, data){\n\tconsole.log(data)\n\tself.props.push('m/' + data)\n}\n\n\nfunction joinRoom(data, self, socket){\n\tdata.id = socket.id\n\temit('player-join-room', data, socket)\n}\n\nfunction successJoiningRoom(self, data, info){\n\t// self.props.setPlayerRoom(data.result)\n\t// self.props.setPlayerNumber(data.playerNumber)\n\tself.props.setPlayerData(data)\n\tself.props.push('m/home')\n}\n\nfunction errorJoiningRoom(){\n\n}\n\n\n\nfunction getPowerup(){\n\tlet powerups = ['invertOpponent']\n    let r = Math.floor(Math.random() * powerups.length)\n    return powerups[r]\n}\n\n// function powerUpGained(self, data){\n// \tself.props.powerUpGained(getPowerup())\n// }\n\nfunction powerUpUsedSocket(data, self){\t\n\temit('power-up-used', data)\n\tself.props.powerUpUsed()\n}\n\nfunction roomFull(self){\n\tself.props.push('pingp/full')\n}\n\nfunction hostQuit(self){\n\tself.props.push('pingp/not-found')\n}\n\nfunction gameOver(self, data){\n\tself.props.setGameOver(true, data)\n\t// cb('setGameOver', true)\n}\n\n\n\n\nfunction sendOrientation(coords, self, socket){\n\tif (self.props.room){\n\t\tlet data = {\n\t\t\troom: self.props.room.long,\n\t\t\tcoords: coords\n\t\t}\n\t\temit('device-orientation', data, socket)\n\t}\n}\n\nfunction restartGame(cb){\n\tcb('setGameOver', false)\n}\n\nfunction startGameSocket(self, socket){\t\n\tself.props.startGame()\n\temit('start-game', self.props.room.long)\n}\n\nfunction quitGameSocket(self, sockt){\n\tself.props.startGame()\n\temit('quit-game-player', self.props.room.long)\n}\n\nfunction restartGameSocket(self, socket){\n\temit('restart-game', self.props.room.long)\n\tself.props.setGameOver(false)\t\n}\n\nfunction gameStarted(cb){\n\tcb('startGame', false)\n}\n\n\n\nfunction emit(action, data, socket){\n\tsocket.emit(action, data)\n}\n\nexport { \n\tchooseGame,\n\tpowerUpUsedSocket,\n\trestartGameSocket,\n\tquitGameSocket,\n\tstartGameSocket,\n\tsendOrientation,\n\tsubscribeToPlayerEvents,\n\tjoinRoom,\n\n};"]},"metadata":{},"sourceType":"module"}